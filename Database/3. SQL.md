# SQL

## Data-Definition Language (DDL)  
- 데이터베이스를 정의하는 언어  
- 데이터를 생성하거나 수정, 삭제 등 전체 골격을 결정하는 역할의 언어  
- CREATE, ALTER, DROP 등  

### DDL : CREATE  

![image](https://user-images.githubusercontent.com/32921115/105570661-3b814980-5d8e-11eb-8143-3d0d46536658.png)  

- table을 생성  

### DDL : Insert  

![image](https://user-images.githubusercontent.com/32921115/105570669-4d62ec80-5d8e-11eb-99e2-d39fed94733f.png)  

- Data를 삽입  

### DDL : Alter  

![image](https://user-images.githubusercontent.com/32921115/105570738-9155f180-5d8e-11eb-89fa-335bd993ccd7.png)  

- 해당 테이블의 attribute를 추가하거나 삭제할 때 사용하는 문  

### DDL : Drop, Delete  
- Drop table r: relation r과 모든 튜플을 삭제  
- Delete from r : 튜플만 삭제, relation r은 남김  

### Intergrity Constraints (무결성 제약조건)  

![image](https://user-images.githubusercontent.com/32921115/105571035-27d6e280-5d90-11eb-9113-6131d66e7ff2.png)

- name에 null값을 못 못가지게 함  
- primary key를 id로 제약  
- foreigh key를 dept_name으로 제약  

## SQL Queries : Select Clause  
- 쿼리의 결과로 요구하는 attribute list가 나옴.  

## SQL Queries : From Clause  
- 쿼리에 관련된 relation이 결과로 나옴  
 
## SQL Queries : Where Clause  
- 쿼리문에서 조건을 입력함.  

### SQL Queries : Example  

![image](https://user-images.githubusercontent.com/32921115/105571277-29a1a580-5d92-11eb-9d48-c10392741533.png)

## Aggregate Functions  
- relation의 Attribute의 값에 대해 연산을 하는 함수.  

### Aggregate Functions : avg  

![image](https://user-images.githubusercontent.com/32921115/105571378-d1b76e80-5d92-11eb-9618-3e98eac9577e.png)  
- 특정 Attribute의 평균  
- as를 통해 avg(salary)라는 이름을 바꿔줄 수 있다.  

### Aggregate Functions : count  

![image](https://user-images.githubusercontent.com/32921115/105571438-265ae980-5d93-11eb-8542-82482f86307b.png)

- 특정 attribute에 대해 조건을 만족하는 값의 개수를 샌다.  
- distinct를 사용하면 중복을 제거해서 값을 반환한다.  
- count(* )을 입력하면 모든 tuple의 개수를 샌다.  

### Aggregate Functions : max/min/sum  

![image](https://user-images.githubusercontent.com/32921115/105571473-5f935980-5d93-11eb-9d5d-49adcbedd3fd.png)

### Aggregate Functions : Group By  
- Attribute의 값을 기준으로 데이터들을 그룹으로 나누어 줌  

### Group By : Example  
- 각 부서의 평균 급여를 가혀면?  

![image](https://user-images.githubusercontent.com/32921115/105571517-b731c500-5d93-11eb-8f8e-f2ca15d44850.png)  

![image](https://user-images.githubusercontent.com/32921115/105571519-bbf67900-5d93-11eb-9af7-6edd5fd6c5f7.png)  

- group by + count  

![image](https://user-images.githubusercontent.com/32921115/105571557-2ad3d200-5d94-11eb-9af2-ef2eca8c9e90.png)  
- **Group by에 있는 attribute들은 반드시 select 절에 있어야 한다.**  

![image](https://user-images.githubusercontent.com/32921115/105571583-5fe02480-5d94-11eb-8382-c1b42f69f366.png)

### Aggregate Functions : Null Values and Aggregates  

- count 함수에서 Null값은 안 새고 무시한다.  
- sum도 마찬가지로 null은 무시하고 더한다. 단 모든 value가 null일 때는 null을 반환한다.  

### Aggregate Functions : Having Clause  

- group by로 그룹화를 할 때 **조건을 정해 그룹화를 하는 절**    
- Where은 그룹화 전에 사용이 되고, having은 그룹화 된 이후 사용이 된다.  

### Having Clause : Example  

![image](https://user-images.githubusercontent.com/32921115/105571665-51463d00-5d95-11eb-9dce-40f963c4616f.png)

- 그룹화 전 Where절을 통화하고  

![image](https://user-images.githubusercontent.com/32921115/105571674-5e632c00-5d95-11eb-82e6-eb17b9dccd56.png)

- 그룹화 한 후  

![image](https://user-images.githubusercontent.com/32921115/105571681-691dc100-5d95-11eb-831a-63b7ce85c7aa.png)  
- Having 절 적용  

## Nested Subqueries  
