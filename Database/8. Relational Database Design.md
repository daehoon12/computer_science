# 8. Relational Database Design  

## Features of Good Relational Design  
- 좋은 E-R database schema를 설계해야 좋은 relation schema가 탄생  
- Bad relation schema는 Anomalies을 초래  

### Anomalies : Redundancy  

![image](https://user-images.githubusercontent.com/32921115/106096672-56323480-6179-11eb-811c-46fdcedbdd40.png)  

- Normalization을 하지 않으면 Attribute의 중복된 값이 많아져 Anomalies들을 초래한다.  

### Anomalies : Update  

![image](https://user-images.githubusercontent.com/32921115/106096968-d48ed680-6179-11eb-85b6-10359ca6a97a.png)

- 위의 예를 보면 dept_name = Comp.Sci, building = Talyor의 budget은 10000인데, 50000으로 업데이트를 하면 데이터에 모순이 생긴다.  

### Anomalies : Delection  

![image](https://user-images.githubusercontent.com/32921115/106097122-14ee5480-617a-11eb-9cf7-4ef813e4ca50.png)

- 하나만 있는 튜플를 삭제할 경우, 그에 대한 정보가 다 사라진다.

**위와 같은 문제점들을 Decomposition을 이용해 해결한다.**  

## Fucntional Dependency (함수 종속)일종이다.

- 어떤 Relation R에서, A와 B를 각각 R의 Attribute 집합의 부분 집합이라 하자. **Attribute A의 값 각각에 대해 시간에 관계없이 항상 Attribute B의 값이 오직 하나만 연관되어 있을 때 B는 A에 함수 종속**이라 하고, A → B라고 표기한다. [1]

 최대 한 개의 B 값에 연관되어 있을 때**, 애트리뷰트의 집합 A를 함수 결정(to functionally determine)하다고 한다.
- A1,A2...,An -> B 이렇게 표현 가능  
- A1,A2...는 결정자(Determinant), B는 Dependent Attribute (종속 속성)이라 한다.  

### Fucntional Dependency : Example  

![image](https://user-images.githubusercontent.com/32921115/106098521-8929f780-617c-11eb-846f-329eae9bbac2.png)

- Fucntional Dependency를 판단할 때는 현재 값만 보고 판단하는 것이 아니라, Attribute가 갖는 의미를 보고 판단해야 한다.  
- ex) ID, name값으로 오직 하나의 salary를 판단할 수는 있지만, ID만 보고 모든 salary가 독립적인 값을 가진다고 볼 수는 없다.  

### Fucntional Dependency (Cont.)  
- B가 A에 대해 functional dependency (A -> B) 일 때, 튜플 t1, t2의 A값이 같으면 b도 같다.  
- t1[A] = t2[A] -> t1[B] = t2[B]  

### Fucntional Dependency (Cont.) : Example  

![image](https://user-images.githubusercontent.com/32921115/106241747-e8097280-6249-11eb-8b46-0a2ed7804884.png)

- length는 title, year에 대해 functional dependency  
- title과 year의 값이 star wars, 1977인 tuple의 length는 124로 같다.  

### Fucntional Dependency (Cont.) : Trivial  

![image](https://user-images.githubusercontent.com/32921115/106241930-34ed4900-624a-11eb-82e0-85849283e119.png)

- A -> B 일 때, B는 A의 부분집합이면 Trivial이다.  



### Fucntional Dependency (Cont.) : Transitive Rule  

![image](https://user-images.githubusercontent.com/32921115/106241976-4cc4cd00-624a-11eb-920e-b33ae8abd4bb.png)

- A -> B and B -> C이면 A -> C  

## Normalization  
- 관계형 데이터베이스의 설계에서 중복을 최소화하게 데이터를 구조화하는 프로세스  
- Anomalies 현상들을 없애준다!  

### Normalization : 1NF  
- 조건 : **Domain 값이 Atomic 해야한다.** 

### Exmaple  

![image](https://user-images.githubusercontent.com/32921115/106242543-30756000-624b-11eb-8d61-6163be8f1a5d.png)

- 2번째 tuple에서 Telephone Number의 값은 Atomic하지 않다.  

![image](https://user-images.githubusercontent.com/32921115/106242654-61ee2b80-624b-11eb-99cc-794b0fcecf5b.png)

- 이렇게 쪼개면 1NF를 만족하는 Table이 된다.  
- 참고로 위의 테이블은 2NF와 3NF도 만족함.  


